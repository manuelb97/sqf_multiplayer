//Delete allMapMarkers
/*
{ 
	deleteMarker _x;
} forEach allMapMarkers;
*/

_successfulMissions = param [0,[]];

//Recreate last marker build
_markerBuild = [["Empty","colorOPFOR",[3840,3840,0],[3790,3790],"RECTANGLE","Solid",0.4,""],["Empty","colorCivilian",[3840,11520,0],[3790,3790],"RECTANGLE","Solid",0.4,""],["Empty","colorIndependent",[11520,3840,0],[3790,3790],"RECTANGLE","Solid",0.4,""],["Empty","colorBLUFOR",[11520,11520,0],[3790,3790],"RECTANGLE","Solid",0.4,""],["mil_start","ColorORANGE",[0,-500,0],[0.7,0.7],"ICON","Solid",1,"Server: 18.98 fps, 16 local groups, 4 local units"],["mil_marker","Default",[-2200,14860,0],[0.75,0.75],"ICON","Solid",1," L i b e r a t i o n"],["mil_flag","Default",[-2200,13660,0],[0.75,0.75],"ICON","Solid",1," D e f e n c e"],["mil_end","Default",[-2200,12460,0],[0.75,0.75],"ICON","Solid",1," H V T"],["mil_unknown","Default",[-2200,11260,0],[0.75,0.75],"ICON","Solid",1," H e i s t"],["mil_pickup","Default",[-2200,10060,0],[0.75,0.75],"ICON","Solid",1," E s c a p e"],["mil_objective","Default",[-2200,8860,0],[0.75,0.75],"ICON","Solid",1," S n i p e r"],["mil_join","Default",[-2200,7660,0],[0.75,0.75],"ICON","Solid",1," S a b o t a g e"],["mil_circle","Default",[-2200,6460,0],[0.75,0.75],"ICON","Solid",1," Z o m b i e"],["mil_box","colorOPFOR",[-2200,5260,0],[2,2],"ICON","Solid",1," T i e r  1"],["mil_box","colorBLUFOR",[-2200,4060,0],[2,2],"ICON","Solid",1," T i e r  2"],["mil_box","colorIndependent",[-2200,2860,0],[2,2],"ICON","Solid",1," T i e r  3"],["mil_box","colorCivilian",[-2200,1660,0],[2,2],"ICON","Solid",1," T i e r  4"],["mil_unknown","ColorCIV",[3132.55,10977.1,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorCIV",[5396.22,10334.7,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorCIV",[5808.6,11213.3,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorCIV",[1954.62,10727,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorCIV",[5752.39,12325.8,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorCIV",[1579.49,11937.8,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorCIV",[2686.79,9280.77,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorCIV",[6164.67,12864.7,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorCIV",[4919.7,8728.68,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorCIV",[6813.05,13439.5,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorCIV",[2363.54,8236.87,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorCIV",[6028.08,8580.17,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorCIV",[1556.43,8545.12,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorCIV",[7080.21,8004.08,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[4132.81,12422.4,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[2722.81,12317.6,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[3314.57,12861.9,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[5511.58,11888.2,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[3012.63,13074.6,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[3809.57,13489.6,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[2340.53,13230.4,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[3821.88,14035.8,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[2706.66,9120.98,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[4276.75,8527.25,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[7270.84,8391.29,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[6162.45,9137.49,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[5962.5,9629.47,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[2235.2,11172.2,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[6833.69,11487.8,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[6679.26,12329,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[6847.05,9975.01,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[3747.47,11668,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[6572.05,8075.25,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[1835.57,12939.5,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[7382.48,12518.3,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[7344.82,9363.19,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[7528.94,10290.3,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorCIV",[4940.49,9967.24,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorCIV",[6524.03,8673.09,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorCIV",[2099.44,7742.91,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorGUER",[12403.5,4569.93,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorGUER",[11802,2662.98,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorGUER",[12715.1,3309.17,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorGUER",[11122.5,5342.93,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorGUER",[12861.9,4691.1,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorGUER",[10255.9,2738.07,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorGUER",[10200.8,4964.28,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorGUER",[13255.1,3019.73,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorGUER",[12255.2,1880.2,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorGUER",[9407.35,4133.13,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorGUER",[13069.4,2117.94,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorGUER",[10974.5,6232.58,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorGUER",[8741.21,3556.31,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorGUER",[8825.16,4778.34,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorGUER",[12984.3,7321.96,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[12169.8,3867.38,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[13313.5,5162.11,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[11761.2,6949.91,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[8939.47,6627.97,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[8368.14,1335.01,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[9303.81,7573.6,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[12459.3,7047.52,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[9990.41,6743.43,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[10697.6,4687.22,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[10226.2,6153.62,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[11773.5,1648.94,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[11449.2,6501.84,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorGUER",[11130.8,7443.1,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[11695,4889.27,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[8218.61,7596.65,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[11309.4,3111,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[11124.5,2453.41,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[10110.9,3401.9,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[10084,7421.19,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[9751.88,2793.33,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[9927.08,3982.29,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorGUER",[11015.2,3903.84,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorGUER",[9429.98,3295.25,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[9442.86,6598.07,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorGUER",[12050.5,5311.96,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorWEST",[11417.6,12360.2,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorWEST",[10487.6,10613.7,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorWEST",[12401.7,12787.8,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[10966.2,13183.5,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorWEST",[11069.2,9748.43,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorWEST",[10423.8,13252.2,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorWEST",[13523,12134.8,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[12317.8,13929.5,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorWEST",[14295.2,11680.3,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[9014.23,10214.2,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[9549.78,13673.4,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorWEST",[14057.4,9955.55,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[8316.95,11132.2,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorWEST",[8114.07,11957.2,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[9213.6,8741.29,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorWEST",[8393.35,13778.4,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[14496.3,8877.4,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorWEST",[14040.9,8308.29,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorWEST",[7829.41,13599.8,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[10978.5,11499.6,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorWEST",[11868.6,10426.9,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[10098.7,11818.1,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[9784.26,12114.1,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorWEST",[8917.03,11948.5,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorWEST",[12383,14135.3,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorWEST",[12820.8,14195,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorWEST",[8526.85,12467.3,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[11003.1,8421.68,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[8323.44,10434.3,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[11043.3,7946.22,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[12534,7801.59,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorWEST",[9827.8,12921.3,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[10927.7,9033.92,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorWEST",[12893.2,11615.4,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[11680.5,8519.22,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorWEST",[8780.61,7931.87,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorWEST",[9812.16,11132.7,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorWEST",[10263.3,8348.75,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[12389.1,10103.2,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorWEST",[12608.5,12065.6,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorEAST",[3051.14,3448.56,0],[1,1],"ICON","Solid",1,""],["mil_unknown","ColorEAST",[3627.54,2208.85,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorEAST",[5684.68,3993.67,0],[1,1],"ICON","Solid",1,""],["mil_circle","ColorEAST",[2131.95,4589.63,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorEAST",[2824.25,5700.17,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorEAST",[1347.24,2968.37,0],[1,1],"ICON","Solid",1,""],["mil_end","ColorEAST",[3403.76,6836.13,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorEAST",[1628.02,6190.57,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorEAST",[7211.97,4237.91,0],[1,1],"ICON","Solid",1,""],["mil_flag","ColorEAST",[2677.42,7441.56,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorEAST",[2263.18,6333.35,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorEAST",[1521.62,887.52,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[7386.65,7547.67,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[5213.76,2276.37,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorEAST",[2665.51,3836.69,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[4788.87,3904.76,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[5980.52,7610.33,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[4048.08,4371.11,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorEAST",[2719.24,2829.75,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorEAST",[5124.17,5018.85,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorEAST",[1781.59,7563.8,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[3145.51,2383.11,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[4319.9,3632.34,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[1827.13,3229.13,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[5968.03,4897.44,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[4518.83,2564.68,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[5278.58,3396.92,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[1842.34,7053.76,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[4119.93,5926.17,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[2301.57,5672.48,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[2410.2,2066.17,0],[1,1],"ICON","Solid",1,""],["mil_join","ColorEAST",[4598.26,1699.52,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[6519.58,4096.46,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[3189.56,6376.48,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[4650.07,5193.23,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[2055.99,4032.88,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[2694.53,6814.24,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[1988.53,2384.36,0],[1,1],"ICON","Solid",1,""],["mil_marker","ColorEAST",[1080.37,7553.75,0],[1,1],"ICON","Solid",1,""],["mil_pickup","ColorEAST",[4911.83,3002.05,0],[1,1],"ICON","Solid",1,""]];
//dont forget to add ; at end of _markerBuild

{
	_markerType = _x select 0;
	_markerColor = _x select 1;
	_markerPos = _x select 2;
	_markerSize = _x select 3;
	_markerShape = _x select 4;
	_markerBrush = _x select 5;
	_markerAlpha = _x select 6;
	_markerText = _x select 7;
	
	_marker = str random [11111, 55555, 99999];
	createMarker [_marker, _markerPos];
	_marker setMarkerType _markerType;
	_marker setMarkerColor _markerColor;
	_marker setMarkerSize _markerSize;
	_marker setMarkerShape _markerShape;
	_marker setMarkerBrush _markerBrush;
	_marker setMarkerAlpha _markerAlpha;
	_marker setMarkerText _markerText;
} forEach _markerBuild;

//Get sectors
private ["_sector1","_sector2","_sector3","_sector4"];
{
	_markerSize = (markerSize _x) select 0; 
	if (_markerSize > 500) then {
		if (markerColor _x == "colorOPFOR") then {
			_sector1 = _x;
		};
		if (markerColor _x == "colorBLUFOR") then {
			_sector2 = _x;
		};
		if (markerColor _x == "colorIndependent") then {
			_sector3 = _x;
		};
		if (markerColor _x == "colorCivilian") then {
			_sector4 = _x;
		};
	};
} forEach allMapMarkers;

sectors = [_sector4,_sector3,_sector2,_sector1];
publicVariable "sectors";

//Remove markers which were cleared via dbi 
if (count _successfulMissions > 0) then {
	{
		_nearestMarker = [allMapMarkers, _x] call BIS_fnc_nearestPosition;
		deleteMarker _nearestMarker;
	} forEach _successfulMissions;
};